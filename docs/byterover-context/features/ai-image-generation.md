## AI Image Generation & Upload (December 2024)

### –û–ø–∏—Å

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø—Ä–æ–º–ø—Ç—ñ–≤ –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ Azure OpenAI —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º–ø—Ç –≤ Google AI Studio (Gemini 3 Banana) –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –≥–∞–ª–µ—Ä–µ—ó.

### –§–∞–π–ª–∏

```
‚îú‚îÄ‚îÄ supabase/functions/generate-image-prompt/index.ts  # Edge Function –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø—Ä–æ–º–ø—Ç—É
‚îú‚îÄ‚îÄ supabase/functions/telegram-scraper/index.ts       # –í–∏–∫–ª–∏–∫ generate-image-prompt –ø—ñ—Å–ª—è –ø—Ä–µ-–º–æ–¥–µ—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ supabase/functions/telegram-webhook/index.ts       # –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–∞ callback –∫–Ω–æ–ø–æ–∫
‚îú‚îÄ‚îÄ supabase/migrations/20251221_add_image_generation_prompt.sql  # –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≤ –¥–ª—è –ø—Ä–æ–º–ø—Ç—É
```

### Workflow

```
1. –ù–æ–≤–∏–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–µ-–º–æ–¥–µ—Ä–∞—Ü—ñ—é (AI)
   ‚Üì
2. Azure OpenAI –≥–µ–Ω–µ—Ä—É—î –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (1-3 —Ä–µ—á–µ–Ω–Ω—è, max 200 —Å–∏–º–≤–æ–ª—ñ–≤)
   ‚Üì
3. –ü—Ä–æ–º–ø—Ç –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤ Telegram –±–æ—Ç—ñ
   ‚Üì
4. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î 2 –æ–ø—Ü—ñ—ó:
   ‚îú‚îÄ üñºÔ∏è –ó–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—è–∫—â–æ —î)
   ‚îÇ  ‚Üí –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î—Ç—å—Å—è, —â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–ª–∏—à–µ–Ω–æ
   ‚îÇ
   ‚îî‚îÄ üì∏ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
      ‚Üí –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ —Ñ–æ—Ç–æ –Ω–∞ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
      ‚Üí –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Ñ–æ—Ç–æ
      ‚Üí –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤ Supabase Storage (/custom/)
      ‚Üí processed_image_url –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –±–∞–∑—ñ
      ‚Üí –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑ URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
   ‚Üì
5. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –∑ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—î—é (üì∞ –í –Ω–æ–≤–∏–Ω–∏ / üìù –í –±–ª–æ–≥)
```

### Database Fields

**–¢–∞–±–ª–∏—Ü—è `news` (—ñ `blog_posts`):**
- `image_generation_prompt` (TEXT) - AI-–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è Google AI Studio
- `prompt_generated_at` (TIMESTAMPTZ) - –ß–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—É
- `processed_image_url` (TEXT) - URL –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–≤–ª–∞—Å–Ω–µ –∞–±–æ AI-–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–µ)
- `image_processed_at` (TIMESTAMPTZ) - –ß–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

### Telegram Bot UI

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üÜï New Post from Telegram Channel                  ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  Channel: @geekneural                              ‚îÇ
‚îÇ  Message ID: 12345                                 ‚îÇ
‚îÇ  Content: Meta Unveils SAM Audio...                ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  üé® Image Generation Prompt (–∫–æ–ø—ñ—é–π –≤ Google...): ‚îÇ
‚îÇ  Professional illustration of audio waveforms...   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  üí° –°–∫–æ–ø—ñ—é–π –ø—Ä–æ–º–ø—Ç –≤–∏—â–µ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π –≤ Google...  ‚îÇ
‚îÇ  ‚è≥ Waiting for moderation...                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [üì∞ –í –Ω–æ–≤–∏–Ω–∏]  [üìù –í –±–ª–æ–≥]                        ‚îÇ
‚îÇ  [üñºÔ∏è –ó–∞–ª–∏—à–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è]  [üì∏ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–µ]‚îÇ
‚îÇ  [üîó LinkedIn EN] [LinkedIn NO] [LinkedIn UA]      ‚îÇ
‚îÇ  [‚ùå Reject]                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Callbacks

| Callback Data | –î—ñ—è |
|---------------|-----|
| `keep_image_${newsId}` | –ó–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è |
| `upload_image_${newsId}` | –ü–æ—á–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è |

### Upload Flow

**1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "üì∏ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–ª–∞—Å–Ω–µ":**
```
‚úÖ Popup: "üì∏ –í—ñ–¥–ø—Ä–∞–≤—Ç–µ —Ñ–æ—Ç–æ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"
‚úèÔ∏è –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è:
   "üì∏ –û—á—ñ–∫—É—é —Ñ–æ—Ç–æ...
    Reply to this message with your photo
    newsId:abc-123-def-456"
```

**2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Ñ–æ—Ç–æ —É reply:**
```
1. Telegram webhook –ø–µ—Ä–µ–≤—ñ—Ä—è—î:
   - –ß–∏ —Ü–µ reply –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è?
   - –ß–∏ –º—ñ—Å—Ç–∏—Ç—å —Ñ–æ—Ç–æ?
   - –ß–∏ —Ç–µ–∫—Å—Ç –º—ñ—Å—Ç–∏—Ç—å "–û—á—ñ–∫—É—é —Ñ–æ—Ç–æ" —Ç–∞ newsId?

2. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ñ–æ—Ç–æ –∑ Telegram Bot API
   ‚Üí –ó–±–µ—Ä—ñ–≥–∞—î –≤ Supabase Storage (bucket: news-images, path: custom/${newsId}_${timestamp}.jpg)
   ‚Üí –û—Ç—Ä–∏–º—É—î –ø—É–±–ª—ñ—á–Ω–∏–π URL

3. –û–Ω–æ–≤–ª—é—î news –∑–∞–ø–∏—Å:
   - processed_image_url = publicUrl
   - image_processed_at = now()

4. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É:
   "‚úÖ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!
    üì∏ URL: https://...
    üÜî News ID: abc-123-def-456"

5. –û–Ω–æ–≤–ª—é—î –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
   "‚úÖ –í–ª–∞—Å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ"
```

### Generate Image Prompt Function

**Input:**
```json
{
  "newsId": "abc-123-def-456",
  "title": "Meta Unveils SAM Audio: A Breakthrough...",
  "content": "Meta has announced..."
}
```

**Output:**
```json
{
  "success": true,
  "prompt": "Professional illustration of audio waveforms transforming into colorful AI neural networks, modern tech style, vibrant blues and purples"
}
```

### Azure OpenAI Prompt Engineering

**–ü—Ä–æ–º–ø—Ç –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö** (`ai_prompts` —Ç–∞–±–ª–∏—Ü—è) –∑ —Ç–∏–ø–æ–º `image_generation` —Ç–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ Admin Panel ‚Üí Settings ‚Üí AI Prompts.

**–î–µ—Ñ–æ–ª—Ç–Ω–∏–π –ø—Ä–æ–º–ø—Ç (–ª—é–¥–∏–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥):**
```
–ü–æ–¥–∏–≤–∏—Å—è –Ω–∞ —Å—Ç–∞—Ç—Ç—é –æ—á–∏–º–∞ –ª—é–¥–∏–Ω–∏ —è–∫—ñ–π –¥–∞–ª–µ–∫–∞ —Ç–µ–º–∞ –∞–ª–µ –ø—Ä–∏ —Ü—å–æ–º—É —â–æ—Å—å —ó–π –Ω—É –¥—É–∂–µ —Ü—ñ–∫–∞–≤–æ.
–Ø–∫ —Ç–∏ –≤–≤–∞–∂–∞—î—à —â–æ —Å–∞–º–µ –±—É–ª–æ –± —Ü—ñ–∫–∞–≤–æ —Ü—ñ–π –ª—é–¥–∏–Ω—ñ? –Ø–∫–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ—Å—Ç–∞–ª–∞ –ø–µ—Ä–µ–¥ –æ—á–∏–º–∞ —Ü—ñ—î—ó –ª—é–¥–∏–Ω–∏?
–ù–∞–ø–∏—à–∏ –æ–¥–Ω–µ –∫–æ—Ä–æ—Ç–∫–µ —Ä–µ—á–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —è–∫–æ–≥–æ —è –± –ø–µ—Ä–µ–¥–∞–≤ –±–∏ —Ö—É–¥–æ–∂–Ω–∏–∫—É —Ä–µ–∞–ª—ñ—Å—Ç—É —Ç–≤–æ—î –±–∞—á–µ–Ω–Ω—è!
–¶–µ –º–æ–∂–µ –±—É—Ç–∏ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è, —Ñ–æ—Ç–æ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞, —Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∞, —ñ —Ç–¥.
–°—Ç–∏–ª—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–±–ª–∏–∂–µ–Ω–∏–π –¥–æ –¥—É—Ö—É —Å—Ç–∞—Ç—Ç—ñ.
–°–∞–º –æ–ø–∏—Å –∫–∞—Ä—Ç–∏–Ω–∏ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–∏–º —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º –∑ –ø–µ—Ä—à–æ–≥–æ –ø–æ–≥–ª—è–¥—É –Ω–∞–≤—ñ—Ç—å –±–µ–∑ —Ç–µ–∫—Å—Ç—É.

–û—Å—å —Å—Ç–∞—Ç—Ç—è:

–ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}

–¢–µ–∫—Å—Ç: {content}

–¢–≤–æ—î –±–∞—á–µ–Ω–Ω—è (–æ–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è, max 200 —Å–∏–º–≤–æ–ª—ñ–≤):
```

**–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∏:**
- `{title}` - –∑–∞–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—Ç—ñ
- `{content}` - –∑–∞–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—Ç—ñ (–ø–µ—Ä—à—ñ 1000 —Å–∏–º–≤–æ–ª—ñ–≤)

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–º–ø—Ç—É:**
- –ï–º–æ—Ü—ñ–π–Ω–∏–π, –ª—é–¥–∏–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥
- –î–∏–≤–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ç—Ç—é –æ—á–∏–º–∞ –∑–≤–∏—á–∞–π–Ω–æ—ó —Ü—ñ–∫–∞–≤–æ—ó –ª—é–¥–∏–Ω–∏
- –°—Ç–≤–æ—Ä—é—î –¥–µ—Ç–∞–ª—å–Ω–∏–π –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –æ–ø–∏—Å
- –í–∏–≤–æ–¥–∏—Ç—å –æ–¥–Ω–µ —Ä–µ—á–µ–Ω–Ω—è (max 200 —Å–∏–º–≤–æ–ª—ñ–≤)
- –ê–¥–∞–ø—Ç—É—î—Ç—å—Å—è –¥–æ –¥—É—Ö—É —Å—Ç–∞—Ç—Ç—ñ

**–Ø–∫ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏:**
1. –ó–∞–π—Ç–∏ –≤ Admin Panel ‚Üí Settings ‚Üí AI Prompts
2. –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ–º–ø—Ç "üé® –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–ø–∏—Å—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è" (—Ç–∏–ø: `image_generation`)
3. –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç—É
4. –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏
5. –ù–∞—Å—Ç—É–ø–Ω—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º—É—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–º–ø—Ç

**–ü—Ä–∏–∫–ª–∞–¥–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –æ–ø–∏—Å—ñ–≤:**

| –°—Ç–∞—Ç—Ç—è | –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –æ–ø–∏—Å (—É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é) |
|--------|----------------------------------|
| "Meta –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ SAM Audio" | –§—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è –¥–µ –∑–≤—É–∫–æ–≤—ñ —Ö–≤–∏–ª—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–∞ –∫–æ–ª—å–æ—Ä–æ–≤—É –Ω–µ–π—Ä–æ–Ω–Ω—É –º–µ—Ä–µ–∂—É –®–Ü, —Å—É—á–∞—Å–Ω–∏–π tech-—Å—Ç–∏–ª—å –∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ —Å–∏–Ω—å–æ-—Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–º–∏ —Ç–æ–Ω–∞–º–∏ |
| "–í—á–µ–Ω—ñ –≤–∏—è–≤–∏–ª–∏ –Ω–æ–≤—É –µ–∫–∑–æ–ø–ª–∞–Ω–µ—Ç—É" | –•—É–¥–æ–∂–Ω—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∏–Ω—å–æ-–∑–µ–ª–µ–Ω–æ—ó –ø–ª–∞–Ω–µ—Ç–∏ —Å—Ö–æ–∂–æ—ó –Ω–∞ –ó–µ–º–ª—é –∑ –¥–≤–æ–º–∞ —Å–æ–Ω—Ü—è–º–∏ –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç—ñ, –∫–æ—Å–º—ñ—á–Ω–∏–π —Å—Ç–∏–ª—å —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—ó |
| "–ù–æ–≤–∏–π –®–Ü —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ–ø–æ–º–∞–≥–∞—î –ª—ñ–∫–∞—Ä—è–º" | –ß–∏—Å—Ç–∞ –º–µ–¥–∏—á–Ω–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è –¥–µ —à—Ç—É—á–Ω–∏–π —ñ–Ω—Ç–µ–ª–µ–∫—Ç —É –≤–∏–≥–ª—è–¥—ñ —Å–≤—ñ—Ç–Ω–æ–≥–æ –º–æ–∑–∫—É –∞–Ω–∞–ª—ñ–∑—É—î –¥–∞–Ω—ñ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ –≥–æ–ª–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –¥–∏—Å–ø–ª–µ—è—Ö |

### Storage Structure

```
news-images/
‚îú‚îÄ‚îÄ telegram/               # –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ Telegram
‚îÇ   ‚îî‚îÄ‚îÄ channelname/
‚îÇ       ‚îú‚îÄ‚îÄ 12345.jpg
‚îÇ       ‚îú‚îÄ‚îÄ 12345_1.jpg     # Multiple images support
‚îÇ       ‚îî‚îÄ‚îÄ 12345_2.jpg
‚îî‚îÄ‚îÄ custom/                 # –í–ª–∞—Å–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    ‚îú‚îÄ‚îÄ abc-123_1703123456789.jpg
    ‚îî‚îÄ‚îÄ def-456_1703123456790.jpg
```

### Error Handling

**1. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ–º–ø—Ç—É –Ω–µ –≤–¥–∞–ª–∞—Å—è:**
- –ù–æ–≤–∏–Ω–∞ –≤—Å–µ –æ–¥–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤ –±–æ—Ç
- –ü—Ä–æ–º–ø—Ç –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
- –ö–Ω–æ–ø–∫–∏ –≤–∏–±–æ—Ä—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è

**2. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è:**
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞
- –ú–æ–∂–Ω–∞ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑
- –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º

**3. Azure OpenAI –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π:**
- –§—É–Ω–∫—Ü—ñ—è –ª–æ–≥—É—î –ø–æ–º–∏–ª–∫—É
- –ü–æ–≤–µ—Ä—Ç–∞—î `success: false`
- Telegram –±–æ—Ç –ø—Ä–æ–¥–æ–≤–∂—É—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –ø—Ä–æ–º–ø—Ç—É

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—É

**Google AI Studio (Gemini 3 Banana):**
1. –í—ñ–¥–∫—Ä–∏—Ç–∏ [Google AI Studio](https://aistudio.google.com/)
2. –í–∏–±—Ä–∞—Ç–∏ –º–æ–¥–µ–ª—å Gemini 3 Banana (–∞–±–æ —ñ–Ω—à–∞ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å)
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º–ø—Ç
4. –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
5. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤ Telegram –±–æ—Ç–∞

### Deploy

```bash
cd supabase

# Apply migrations (–¥–æ–¥–∞—î –ø–æ–ª—è —Ç–∞ –æ–Ω–æ–≤–ª—é—î –ø—Ä–æ–º–ø—Ç)
# –í–∏–∫–æ–Ω–∞—Ç–∏ SQL –∑ —Ñ–∞–π–ª—ñ–≤:
# - 20251221_add_image_generation_prompt.sql (–¥–æ–¥–∞—î –ø–æ–ª—è)
# - 20251221_update_image_generation_prompt.sql (–æ–Ω–æ–≤–ª—é—î –ø—Ä–æ–º–ø—Ç)

# –§—É–Ω–∫—Ü—ñ—ó –∑–∞–¥–µ–ø–ª–æ—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ GitHub Actions –ø—Ä–∏ merge –≤ main
# –ê–±–æ –≤—Ä—É—á–Ω—É:
supabase functions deploy generate-image-prompt
supabase functions deploy telegram-webhook
supabase functions deploy telegram-scraper
```

**–í–ê–ñ–õ–ò–í–û:** –ü–µ—Ä–µ–¥ deploy –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤ Supabase Secrets —î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:
- `AZURE_OPENAI_ENDPOINT`
- `AZURE_OPENAI_API_KEY`
- `TELEGRAM_BOT_TOKEN`
- `SUPABASE_URL`
- `SUPABASE_SERVICE_ROLE_KEY`

---
